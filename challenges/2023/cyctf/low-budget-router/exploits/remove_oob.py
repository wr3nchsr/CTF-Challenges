data = open("fw_dump.bin", "rb").read()
out = open("fw_dump_without_oob.bin", "wb")

counter = 0
for i in range(0, len(data), 2112):
    if data[i+2048:i+2112] == b"\xff" * 64:
        counter += 1
        out.write(data[i:i+2048])
    else:
        print(f"Error correction needed in page {counter + 1}")
        exit(1)

print(f"Number of clean pages: {counter}")
out.close()
